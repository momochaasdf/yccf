(function(f){function v(a,b){"click"==b.showEvent?(f("#slt-img-"+b.id).on("click",function(){f(".ui-select-panel").hide();h(b.id).show();return!1}),f("body").off("click.ui_select").on("click.ui_select",function(){f(".ui-select-panel").hide()})):"mouseenter"==b.showEvent&&(a.on("mouseenter",function(){h(b.id).show()}),a.on("mouseleave",function(){h(b.id).hide()}));if(b.event){if(b.event.change){var d=b.event.change;k(b.id).change(d);delete b.event.change}a.on(b.event,".ui-select-item")}}function w(a,
b){for(var d=0;d<a.length;d++)a[d].on("click",".ui-select-item",{curSetting:b[d],nextSetting:d<a.length-1?b[d+1]:null},function(a){h(a.data.curSetting.id).hide();var b=f(this).attr("value"),b=b?f.trim(b):b;if(b!=k(a.data.curSetting.id).val()){for(var c=q(a.data.curSetting.id).data("select").group,c=f("body").data("ui-select-"+c),d=!1,m=0;m<c.length;m++)c[m]===a.data.curSetting.id?d=!0:d&&r(c[m]);c=l(a.data.curSetting.id);c.text(f(this).text());c.hasClass("ui-sel-gray")&&c.removeClass("ui-sel-gray");
k(a.data.curSetting.id).val(b).change();a.data.nextSetting&&(c=q(a.data.nextSetting.id),c.data("select").parent=b,h(a.data.nextSetting.id).find(".ui-select-item:not(.select-item-head)").remove(),b&&s(c,a.data.nextSetting,a.data.curSetting.parent))}return!1});a[0]&&s(a[0],b[0])}function s(a,b,d){if(b.url){var x=(a=a.data("select").parent)?utils.placeholder(b.url,a):b.url,g=utils.clone(b.params);if(a&&g)if("string"===typeof g)g=a?utils.placeholder(g,a):g;else if("object"===typeof g)for(var c in g)g[c]=
utils.placeholder(g[c],a);f.ajax({url:x,data:g,type:"POST",async:!1,success:function(a){a=t(a,b,d);h(b.id).append(a.str);a.selectVal&&h(b.id).find(".ui-select-item[value="+a.selectVal+"]").click()}})}else b.data&&(c=t(b.data,b,d),h(b.id).append(c.str),c.selectVal&&h(b.id).find(".ui-select-item[value="+c.selectVal+"]").click())}function t(a,b,d){var f={str:"",selectVal:null};if(a instanceof Array){for(var g,c=[],h=0;h<a.length;h++)g=a[h],g[b.text]&&(d&&b.parent&&d===b.parent||!d||!b.parent)&&(c.push('<div class="ui-select-item" '+
(g[b.value]?'value="'+g[b.value]+'"':"")+" >"),c.push(g[b.text]),c.push("</div>"),g[b.selected]&&(f.selectVal=g[b.value]));f.str=c.join("")}else a[b.text]&&(d&&b.parent&&d===b.parent||!d||!b.parent)&&(f.str='div class="ui-select-item" '+(a[b.value]?'value="'+a[b.value]+'"':"")+" >"+a[b.text]+"</div>",a[b.selected]&&(f.selectVal=a[b.value]));return f}function r(a){var b=q(a).data("select").settings,d=l(b.id);d.hasClass("ui-sel-gray")&&d.removeClass("ui-sel-gray");b.headText?(k(a).val(b.headValue).change(),
l(a).text(b.headText),h(a).html(u(b.id,b.headValue,b.headText))):(k(a).val("").change(),l(a).text(""))}function u(a,b,d){return'<div id="slt-item-head-'+a+'" class="ui-select-item select-item-head" value="'+(b?b:"")+'" >'+d+"</div>"}function q(a){return f("#slt-select-"+a)}function k(a){return f("#"+a)}function l(a){return f("#slt-title-"+a)}function l(a){return f("#slt-title-"+a)}function h(a){return f("#slt-panel-"+a)}var y={id:!1,selfClass:!1,name:!1,url:!1,params:!1,data:!1,text:"name",value:"id",
selected:"selected",headText:!1,headValue:!1,parent:!1,width:"200px",height:"24px",fontSize:"12px",style:!1,title:!1,showEvent:"click",event:!1};utils.loadCss(BaseData.path+"/common/js/expand/select/select.css");f.fn.UI_select=function(a){var b=++f.UI_select.SELECT_UI_Num+"";if(void 0===this[0]||!a)return!1;!a instanceof Array&&(a=[a]);for(var d=Array(a.length),h=Array(a.length),g=0;g<a.length;g++){var c=a[g]=f.extend({},y,a[g]),k=f('<div id="slt-select-'+c.id+'" class="ui-select" style="width:'+c.width+
"; height:"+c.height+";font-size:"+c.fontSize+';"></div>'),m=f('<input type="text" id="'+c.id+'" class="ui-select-value" style="display: none;" />'),n=f('<img id="slt-img-'+c.id+'" style="width:'+c.width+"; height:"+c.height+';" src="'+BaseData.path+'/common/js/expand/select/imgs/select.jpg" />'),l=m,p=c;p.id&&l.attr("id",p.id);p.selfClass&&l.addClass(p.selfClass);p.id&&l.attr("name",p.name);k.append(m).append(n);c.title&&k.append('<div id="slt-title-'+c.id+'" class="ui-sel-title ui-sel-gray" style="height:'+
c.height+"; line-height:"+c.height+';">'+c.title+"</div>");m=k;n=c;l=f('<div id="slt-panel-'+n.id+'" class="ui-select-panel" style="display:none;width: '+n.width+";top:"+n.height+';"></div>');n.headText&&l.append(u(n.id,n.headValue,n.headText));m.append(l);k.data("select",{settings:c,parent:null,group:b});this.append(k);v(k,c);d[g]=k;h[g]=c.id}f("body").data("ui-select-"+b,h);w(d,a)};f.UI_select={SELECT_UI_Num:0,clear:function(a){a=q(a).data("select").group;a=f("body").data("ui-select-"+a);for(var b=
!1,d=0;d<a.length;d++)a[d]===e.data.curSetting.id&&(b=!0),b&&r(a[d])},reset:function(a){},select:function(a,b){var d=h(a).find(".ui-select-item[value="+b+"]");return 0<d.length?(d.click(),!0):!1},unselect:function(a,b){return k(a).val()===b?(f("#slt-item-head-"+a).click(),k(a).change(),!0):!1},setValue:function(a,b){k(a).val(b).change()},getSelected:function(a){var b={},d=k(a).val();""!=d&&(b.value=d,b.text=l(a).html());return b}}})(jQuery);
