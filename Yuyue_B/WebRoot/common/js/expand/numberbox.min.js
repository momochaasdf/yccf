(function(c){function e(a){return c.data(a,"ui-numberbox").value}function g(a,b){var d=c(a).UI_numberbox("settings"),f=e(a);b=d.parser.call(a,b);c.data(a,"ui-numberbox").value=b;c(a).val(d.formatter.call(a,b));f!=b&&d.onChange.call(a,b,f)}function h(a){var b=c(a).UI_numberbox("settings");c(a).unbind(".numberbox").bind("keypress.numberbox",function(c){return b.filter.call(a,c)}).bind("blur.numberbox",function(){g(a,c(this).val())}).bind("focus.numberbox",function(){var d=e(a);d!=b.parser.call(a,c(this).val())&&
c(this).val(b.formatter.call(a,d))})}c.fn.UI_numberbox=function(a,b){if("string"==typeof a){var d=c.fn.UI_numberbox.methods[a];if(d)return d(this,b)}a=c.extend({},k,a);return this.each(function(){var b=c.data(this,"ui-numberbox");b?c.extend(b.settings,a):(b=""!=a.initValue?a.initValue:c(this).val(),c.data(this,"ui-numberbox",{settings:a,value:b}),c(this).css({imeMode:"disabled"}));h(this);b=c(this).UI_numberbox("settings");val=b.parser.call(this,e(this));c(this).val(b.formatter.call(this,val));c.data(this,
"ui-numberbox").value=val;b.initValue=val})};c.fn.UI_numberbox.methods={settings:function(a){return c.data(a[0],"ui-numberbox").settings},destroy:function(a){return a.each(function(){c.removeData(this,"ui-numberbox");c(this).remove()})},fix:function(a){return a.each(function(){g(this,c(this).val())})},setValue:function(a,b){return a.each(function(){g(this,b)})},getValue:function(a){return e(a[0])},clear:function(a){return a.each(function(){c.data(this,"ui-numberbox").value="";c(this).val("")})},reset:function(a){return a.each(function(){var a=
c(this).UI_numberbox("settings");c(this).numberbox("setValue",a.initValue)})}};var k={initValue:"",min:null,max:null,precision:0,decimalSeparator:".",groupSeparator:"",prefix:"",suffix:"",filter:function(a){var b=c(this).UI_numberbox("settings");if(45==a.which)return-1==c(this).val().indexOf("-")?!0:!1;var d=String.fromCharCode(a.which);return d==b.decimalSeparator?-1==c(this).val().indexOf(d)?!0:!1:d==b.groupSeparator?!0:48<=a.which&&57>=a.which&&!1==a.ctrlKey&&!1==a.shiftKey||0==a.which||8==a.which?
!0:!0!=a.ctrlKey||99!=a.which&&118!=a.which?!1:!0},formatter:function(a){if(!a)return a;a+="";var b=c(this).UI_numberbox("settings"),d=a,f="",e=a.indexOf(".");0<=e&&(d=a.substring(0,e),f=a.substring(e+1,a.length));if(b.groupSeparator)for(a=/(\d+)(\d{3})/;a.test(d);)d=d.replace(a,"$1"+b.groupSeparator+"$2");return f?b.prefix+d+b.decimalSeparator+f+b.suffix:b.prefix+d+b.suffix},parser:function(a){a+="";var b=c(this).UI_numberbox("settings");parseFloat(a)!=a&&(b.prefix&&(a=c.trim(a.replace(RegExp("\\"+
c.trim(b.prefix),"g"),""))),b.suffix&&(a=c.trim(a.replace(RegExp("\\"+c.trim(b.suffix),"g"),""))),b.groupSeparator&&(a=c.trim(a.replace(RegExp("\\"+b.groupSeparator,"g"),""))),b.decimalSeparator&&(a=c.trim(a.replace(RegExp("\\"+b.decimalSeparator,"g"),"."))),a=a.replace(/\s/g,""));a=parseFloat(a).toFixed(b.precision);isNaN(a)?a="":"number"==typeof b.min&&a<b.min?a=b.min.toFixed(b.precision):"number"==typeof b.max&&a>b.max&&(a=b.max.toFixed(b.precision));return a},onChange:function(a,b){}}})(jQuery);
